# React Frontend
FROM node as react-build
WORKDIR /frontend

COPY safeshare-frontend/ ./

RUN npm install

# Start the react app
CMD ["npm", "start"]

FROM python:3.10 as backend-build

ENV PYTHONUNBUFFERED 1

WORKDIR /code

COPY requirements.txt ./
RUN pip install --no-cache-dir -r requirements.txt

COPY . /code/

RUN chmod a+x start.sh

CMD ["./start.sh"]